<html>
<head>
<title>updater</title>
</head>
<body>
<div id="version"></div>
<script>
  var request = require('request');
  var k = 0;
  setInterval(function(){
    
    getVersion(function(ver){
      var t = document.createElement('div');
      t.innerHTML = k++ +":"+ ver;
      document.getElementById('version').appendChild(t);
    })
  }, 500);

  function getVersion(cb){
    request.get('https://raw.githubusercontent.com/openconf/updater/master/package.json', gotPkgJson);
    function gotPkgJson(err, req, data){
      if(err) {
        console.error(err);
        return;
      }
      console.log(data)
      cb(JSON.parse(data).version);
    }
  }
</script>
</body>
</html>
